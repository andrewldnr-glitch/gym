/* css/style.css — OPAL-inspired Light/Dark themes */

/* =========================================================
   OPAL THEME TOKENS (single source of truth)
   Toggle: <html data-theme="light"> / "dark"
   ========================================================= */

:root{
  --font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

  /* Radii */
  --radius-lg: 28px;
  --radius-md: 20px;
  --radius-sm: 14px;

  /* Spacing */
  --container-padding: 20px;

  /* Shadows */
  --shadow-soft: 0 18px 50px rgba(0, 0, 0, 0.35);
  --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.28);
  --shadow-elev: 0 8px 24px rgba(0, 0, 0, 0.22);

  /* Borders */
  --border-light: rgba(255, 255, 255, 0.10);

  /* Core palette (default DARK) */
  --bg-primary: #0b0d18;
  --bg-secondary: #0f1222;
  --bg-card: rgba(255, 255, 255, 0.06);

  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.68);

  --accent-primary: #7c7cff;   /* indigo */
  --accent-secondary: #a78bfa; /* purple */
  --accent-tertiary: #60a5fa;  /* blue */

  /* OPAL background */
  --bg-gradient:
    radial-gradient(1200px 900px at 20% -10%, rgba(124, 124, 255, 0.30), transparent 55%),
    radial-gradient(900px 700px at 90% 10%, rgba(167, 139, 250, 0.24), transparent 55%),
    radial-gradient(900px 700px at 60% 120%, rgba(96, 165, 250, 0.18), transparent 60%),
    linear-gradient(180deg, #070914 0%, #0b0d18 35%, #090b16 100%);

  /* CTA */
  --cta-gradient: linear-gradient(135deg, rgba(124,124,255,1) 0%, rgba(167,139,250,1) 55%, rgba(96,165,250,1) 100%);

  /* Misc */
  --icon-muted: rgba(255,255,255,0.70);
}

/* LIGHT overrides */
html[data-theme="light"]{
  --bg-primary: #f6f7fb;
  --bg-secondary: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.78);

  --text-primary: #0b1020;
  --text-secondary: rgba(11, 16, 32, 0.60);

  --border-light: rgba(11, 16, 32, 0.08);

  --accent-primary: #6b7cff;
  --accent-secondary: #b38bff;
  --accent-tertiary: #60a5fa;

  --shadow-soft: 0 18px 50px rgba(16, 24, 40, 0.12);
  --shadow-card: 0 10px 30px rgba(16, 24, 40, 0.10);
  --shadow-elev: 0 8px 24px rgba(16, 24, 40, 0.08);

  --bg-gradient:
    radial-gradient(1200px 900px at 20% -10%, rgba(107,124,255,0.26), transparent 55%),
    radial-gradient(900px 700px at 90% 10%, rgba(179,139,255,0.20), transparent 55%),
    radial-gradient(900px 700px at 60% 120%, rgba(96,165,250,0.16), transparent 60%),
    linear-gradient(180deg, #ffffff 0%, #f6f7fb 55%, #f3f5fb 100%);

  --icon-muted: rgba(11, 16, 32, 0.65);
}


html[data-theme="light"],
body[data-theme="light"] {
  --bg-primary: #f6f7fb;
  --bg-secondary: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.78);

  --text-primary: #0b1020;
  --text-secondary: rgba(11, 16, 32, 0.60);

  --border-light: rgba(11, 16, 32, 0.08);

  --accent-primary: #6b7cff;
  --accent-secondary: #b38bff;
  --accent-tertiary: #60a5fa;

  --shadow-soft: 0 18px 50px rgba(16, 24, 40, 0.12);
  --shadow-card: 0 10px 30px rgba(16, 24, 40, 0.10);
  --shadow-elev: 0 8px 24px rgba(16, 24, 40, 0.08);

  --bg-gradient:
    radial-gradient(1200px 900px at 20% -10%, rgba(107,124,255,0.26), transparent 55%),
    radial-gradient(900px 700px at 90% 10%, rgba(179,139,255,0.20), transparent 55%),
    radial-gradient(900px 700px at 60% 120%, rgba(96,165,250,0.16), transparent 60%),
    linear-gradient(180deg, #ffffff 0%, #f6f7fb 55%, #f3f5fb 100%);

  --surface-1: rgba(255,255,255,0.78);
  --surface-2: rgba(255,255,255,0.92);
  --surface-3: rgba(255,255,255,0.98);

  --icon-muted: rgba(11, 16, 32, 0.65);
}

html[data-theme="dark"],
body[data-theme="dark"] {
  /* explicit, but defaults already dark */
}

/* =========================================================
   2) GLOBAL BASE
   ========================================================= */

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body{
  margin: 0;
  padding: 0;
  font-family: var(--font-family);
  color: var(--text-primary);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;

  background: var(--bg-gradient);
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-size: cover;
}

.container {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  padding: var(--container-padding);
}

h1 {
  font-size: 1.9rem;
  margin: 10px 0;
  font-weight: 800;
  letter-spacing: -0.6px;
}

h2 {
  font-size: 1.35rem;
  margin: 10px 0 16px;
  font-weight: 800;
  letter-spacing: -0.3px;
}

h3 {
  font-size: 1.08rem;
  margin: 10px 0 12px;
  font-weight: 700;
}

p {
  color: var(--text-secondary);
  font-size: 0.95rem;
  margin: 0;
}

/* Subtle separators */
hr {
  border: none;
  border-top: 1px solid var(--border-light);
  margin: 14px 0;
}

/* =========================================================
   3) CARDS / SURFACES (OPAL floating cards)
   ========================================================= */

.card,
.stat-item,
.workout-card,
.course-card,
.info-card,
.chart-container {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-card);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.card {
  padding: 16px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
  text-decoration: none;
  color: inherit;
  display: block;
}

.card:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
}

.card-title {
  font-weight: 700;
  font-size: 1.06rem;
  margin-bottom: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card-desc {
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

/* Badges */
.card-badge {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 999px;
  font-weight: 700;
  font-size: 0.72rem;
  text-transform: uppercase;
  border: 1px solid var(--border-light);
  background: rgba(255,255,255,0.06);
}

.badge-easy { color: var(--accent-secondary); }
.badge-medium { color: var(--accent-tertiary); }
.badge-hard { color: var(--accent-primary); }
.badge-group {
  color: var(--text-secondary);
  font-weight: 600;
  margin-left: 8px;
}

/* =========================================================
   4) BUTTONS (OPAL pill CTA)
   ========================================================= */

.btn-main,
.start-course-btn,
.start-btn,
.btn-add-weight,
.btn-share-result {
  border: none;
  cursor: pointer;
  font-weight: 800;
  border-radius: 999px;
  transition: transform 0.12s ease, filter 0.18s ease, opacity 0.18s ease;
}

.btn-main {
  width: 100%;
  padding: 16px 18px;
  background: var(--cta-gradient);
  color: #fff;
  box-shadow: 0 12px 30px rgba(124,124,255,0.25);
}

.btn-main:active { transform: scale(0.985); }

.start-course-btn {
  width: 100%;
  padding: 14px 16px;
  background: var(--cta-gradient);
  color: #fff;
  box-shadow: 0 12px 28px rgba(167,139,250,0.22);
}

.start-course-btn:active { transform: scale(0.985); }

.btn-back,
.back-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 0.95rem;
  cursor: pointer;
  padding: 6px 0;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: color 0.2s ease;
  text-decoration: none;
}

.btn-back:hover,
.back-btn:hover { color: var(--text-primary); }

/* Weight input button */
.btn-add-weight {
  padding: 0 22px;
  height: 48px;
  background: var(--cta-gradient);
  color: #fff;
  box-shadow: 0 10px 22px rgba(124,124,255,0.18);
}

.btn-add-weight:active { transform: scale(0.985); }

/* Share button (keep but calm it a bit) */
.btn-share-result {
  width: 100%;
  padding: 16px 20px;
  margin-top: 10px;
  background: linear-gradient(135deg, rgba(96,165,250,1) 0%, rgba(167,139,250,1) 100%);
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 12px 30px rgba(96,165,250,0.20);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
.btn-share-result:active { transform: scale(0.985); }

/* =========================================================
   5) TAB BAR (translucent OPAL dock)
   ========================================================= */

.tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 78px;
  background: rgba(255,255,255,0.08);
  border-top: 1px solid var(--border-light);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding-bottom: 10px;
  z-index: 100;
  pointer-events: none;
}

html[data-theme="light"] .tab-bar,
body[data-theme="light"] .tab-bar {
  background: rgba(255,255,255,0.72);
}

.tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 0.75rem;
  font-weight: 700;
  gap: 4px;
  transition: color 0.2s;
  width: 64px;
  pointer-events: auto;
}

.tab-item.active { color: var(--accent-primary); }

.tab-icon {
  width: 24px;
  height: 24px;
  margin-bottom: 2px;
  opacity: 0.9;
}

body.has-tab-bar .container { padding-bottom: 110px; }

/* =========================================================
   6) STATS (big numbers, clear hierarchy)
   ========================================================= */

.stat-item {
  padding: 18px;
  margin-bottom: 12px;
}

.stat-value {
  font-size: 2.6rem;
  font-weight: 900;
  letter-spacing: -1px;
  color: var(--accent-primary);
  margin: 6px 0;
}

.stat-label {
  color: var(--text-secondary);
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 1.2px;
}

/* =========================================================
   7) LISTS / WORKOUT CARDS (clean, airy)
   ========================================================= */

.filter-tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 18px;
  overflow-x: auto;
  padding-bottom: 5px;
  -webkit-overflow-scrolling: touch;
}

.filter-btn {
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border-light);
  color: var(--text-secondary);
  padding: 9px 16px;
  border-radius: 999px;
  font-size: 0.9rem;
  font-weight: 800;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.filter-btn.active {
  background: var(--cta-gradient);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 10px 22px rgba(124,124,255,0.18);
}

.workout-card {
  padding: 16px;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 14px;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.workout-card:active { transform: scale(0.992); }

.workout-icon {
  width: 58px;
  height: 58px;
  border-radius: 18px;
  background: rgba(255,255,255,0.10);
  border: 1px solid var(--border-light);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--icon-muted);
}

.workout-icon svg { width: 28px; height: 28px; }

.workout-details { flex-grow: 1; }

.workout-details h3 {
  font-size: 1.08rem;
  margin: 0 0 6px 0;
  color: var(--text-primary);
  font-weight: 800;
  letter-spacing: -0.2px;
}

.workout-tags {
  display: flex;
  gap: 8px;
  margin-bottom: 6px;
  flex-wrap: wrap;
}

.tag {
  font-size: 0.76rem;
  padding: 5px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border-light);
  font-weight: 800;
}

.tag.weight { color: var(--accent-secondary); }
.tag.reps { color: var(--accent-tertiary); }

.workout-advice {
  font-size: 0.86rem;
  color: var(--text-secondary);
  line-height: 1.35;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.workout-action {
  color: var(--text-secondary);
  font-size: 1.1rem;
  opacity: 0.8;
}

/* Level badge in header */
.level-badge {
  background: rgba(255,255,255,0.10);
  border: 1px solid var(--border-light);
  color: var(--text-primary);
  padding: 7px 14px;
  border-radius: 999px;
  font-size: 0.78rem;
  font-weight: 900;
  text-transform: uppercase;
}

/* =========================================================
   8) WEIGHT SECTION (clean inputs)
   ========================================================= */

.weight-section {
  margin-top: 26px;
  padding-top: 18px;
  border-top: 1px solid var(--border-light);
}

.weight-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 14px;
}

.weight-current {
  font-size: 2.2rem;
  font-weight: 900;
  letter-spacing: -0.8px;
  color: var(--accent-primary);
}

.weight-current small {
  font-size: 1rem;
  color: var(--text-secondary);
  font-weight: 700;
}

.chart-container {
  height: 210px;
  width: 100%;
  margin-bottom: 18px;
  padding: 16px;
  border-radius: var(--radius-lg);
}

.input-weight-group {
  display: flex;
  gap: 10px;
  margin-bottom: 18px;
}

.input-weight {
  flex: 1;
  height: 48px;
  background: rgba(255,255,255,0.10);
  border: 1px solid var(--border-light);
  color: var(--text-primary);
  padding: 12px;
  border-radius: 999px;
  font-size: 1.1rem;
  font-weight: 800;
  text-align: center;
  outline: none;
}

html[data-theme="light"] .input-weight,
body[data-theme="light"] .input-weight {
  background: rgba(11,16,32,0.04);
}

.weight-history-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-light);
  font-size: 0.95rem;
}
.weight-history-item:last-child { border-bottom: none; }
.weight-val { font-weight: 900; color: var(--text-primary); }
.date-val { color: var(--text-secondary); font-weight: 700; }
.diff-val { font-size: 0.8rem; margin-left: 6px; font-weight: 900; }
.diff-plus { color: var(--accent-primary); }
.diff-minus { color: var(--accent-secondary); }

/* =========================================================
   9) ACHIEVEMENTS
   ========================================================= */

.achievements-section {
  margin-top: 26px;
  padding-top: 18px;
  border-top: 1px solid var(--border-light);
}

.badges-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 14px;
}

.badge-item {
  background: var(--bg-card);
  border-radius: var(--radius-md);
  padding: 12px 10px;
  text-align: center;
  border: 1px solid var(--border-light);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  opacity: 0.45;
  transition: all 0.25s ease;
  box-shadow: var(--shadow-elev);
}

.badge-item.active {
  opacity: 1;
  border-color: rgba(124,124,255,0.40);
  box-shadow: 0 18px 40px rgba(124,124,255,0.16);
}

.badge-icon { font-size: 1.8rem; margin-bottom: 6px; }
.badge-name {
  font-size: 0.72rem;
  color: var(--text-secondary);
  line-height: 1.2;
  font-weight: 800;
}
.badge-item.active .badge-name { color: var(--text-primary); }

/* =========================================================
   10) MODAL (clean centered OPAL card)
   ========================================================= */

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  display: flex;
  align-items: center;
  justify-content: center;

  z-index: 100;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.25s ease, visibility 0.25s ease;
  padding: 18px;
}

html[data-theme="light"] .modal-overlay,
body[data-theme="light"] .modal-overlay {
  background: rgba(11,16,32,0.35);
}

.modal-overlay.active { opacity: 1; visibility: visible; }

.modal-content {
  width: 100%;
  max-width: 420px;
  max-height: 88vh;
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: 22px;
  position: relative;
  transform: translateY(14px) scale(0.98);
  transition: transform 0.25s ease;
  box-shadow: var(--shadow-soft);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.modal-overlay.active .modal-content { transform: translateY(0) scale(1); }

.modal-close {
  position: absolute;
  top: 14px;
  right: 16px;
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border-light);
  color: var(--text-secondary);
  width: 38px;
  height: 38px;
  border-radius: 12px;
  font-size: 18px;
  cursor: pointer;
}

.modal-title {
  font-size: 1.5rem;
  margin: 6px 0 8px;
  font-weight: 900;
  letter-spacing: -0.5px;
}

.modal-desc { margin-bottom: 14px; }

.modal-info-blocks {
  display: flex;
  gap: 10px;
  margin-bottom: 14px;
}

.info-block {
  flex: 1;
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border-light);
  padding: 14px;
  border-radius: var(--radius-md);
  text-align: center;
}

.info-block .label {
  display: block;
  font-size: 0.72rem;
  color: var(--text-secondary);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 900;
}

.info-block .value {
  display: block;
  font-size: 1.05rem;
  font-weight: 900;
  color: var(--text-primary);
}

.modal-advice-box {
  background: rgba(124,124,255,0.12);
  border: 1px solid rgba(124,124,255,0.25);
  padding: 14px;
  border-radius: var(--radius-md);
  margin-bottom: 14px;
}

/* Timer area */
.timer-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: center;
  width: 100%;
  padding: 6px 0 0;
  gap: 12px;
}

.start-btn {
  width: 100%;
  padding: 16px 18px;
  background: var(--cta-gradient);
  color: #fff;
  border-radius: 999px;
  font-size: 1.05rem;
  font-weight: 900;
  box-shadow: 0 12px 28px rgba(124,124,255,0.22);
}
.start-btn:active { transform: scale(0.985); }

.timer-display {
  width: 100%;
  height: auto;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding-bottom: 8px;
}

.timer-display > div {
  width: 170px !important;
  height: 170px !important;
  max-width: 170px;
  max-height: 170px;
  margin: 2px auto 8px auto;
  position: relative;
  flex-shrink: 0;
}

.timer-svg { display: block; width: 100%; height: 100%; transform: rotate(-90deg); }
.timer-bg { fill: none; stroke: rgba(255,255,255,0.18); stroke-width: 8; }

html[data-theme="light"] .timer-bg,
body[data-theme="light"] .timer-bg {
  stroke: rgba(11,16,32,0.10);
}

.timer-circle {
  fill: none;
  stroke: var(--accent-primary);
  stroke-width: 8;
  stroke-linecap: round;
  stroke-dasharray: 283;
  stroke-dashoffset: 0;
  transition: stroke-dashoffset 1s linear, stroke 0.3s;
  filter: drop-shadow(0 0 10px rgba(124,124,255,0.25));
}

.timer-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  font-weight: 1000;
  line-height: 1;
  color: var(--text-primary);
}

/* Skip rest button */
.rest-skip-btn {
  width: 100%;
  padding: 14px 16px;
  border-radius: 999px;
  border: 1px solid var(--border-light);
  background: rgba(255,255,255,0.10);
  color: var(--text-primary);
  font-weight: 900;
  cursor: pointer;
}
html[data-theme="light"] .rest-skip-btn,
body[data-theme="light"] .rest-skip-btn {
  background: rgba(11,16,32,0.04);
}

.rest-skip-btn:active { transform: scale(0.985); }

/* =========================================================
   11) COURSE DETAIL
   ========================================================= */

.course-detail-header { margin-bottom: 22px; }

.course-stats {
  display: flex;
  gap: 12px;
  margin-top: 12px;
  font-size: 0.9rem;
  color: var(--text-secondary);
  flex-wrap: wrap;
}
.course-stats b { color: var(--text-primary); }

.course-rules {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  padding: 15px;
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-elev);
}

.rule-item {
  margin-bottom: 14px;
  padding-bottom: 14px;
  border-bottom: 1px solid var(--border-light);
}
.rule-item:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }

.rule-item h4 {
  color: var(--accent-primary);
  margin-bottom: 6px;
  font-size: 0.95rem;
  font-weight: 900;
}

.rule-item p { font-size: 0.88rem; color: var(--text-secondary); }

.days-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-bottom: 30px;
}

.day-card {
  background: var(--bg-card);
  padding: 15px 18px;
  border-radius: var(--radius-lg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-elev);
}
.day-card:active { transform: scale(0.995); }

.day-info h3 { font-size: 1.02rem; margin: 0 0 4px 0; font-weight: 900; }
.day-info p { font-size: 0.82rem; color: var(--text-secondary); }

.day-arrow { color: var(--accent-primary); font-size: 1rem; font-weight: 900; }

/* =========================================================
   12) SPLASH
   ========================================================= */

.splash-screen {
  position: fixed;
  inset: 0;
  background: var(--bg-gradient);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}

.splash-screen.hidden { opacity: 0; visibility: hidden; }

.splash-logo {
  width: 84px;
  height: 84px;
  border-radius: 24px;
  background: var(--cta-gradient);
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 22px;
  box-shadow: 0 18px 40px rgba(124,124,255,0.22);
}

.splash-logo svg { width: 46px; height: 46px; color: #fff; }

.splash-title {
  font-size: 1.75rem;
  font-weight: 1000;
  color: var(--text-primary);
  letter-spacing: -0.6px;
  margin-bottom: 26px;
}

.loader { display: flex; gap: 7px; }
.loader-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: rgba(255,255,255,0.55);
  animation: bounce 1.4s infinite ease-in-out both;
}
html[data-theme="light"] .loader-dot,
body[data-theme="light"] .loader-dot {
  background-color: rgba(11,16,32,0.35);
}
.loader-dot:nth-child(1) { animation-delay: -0.32s; background-color: var(--accent-primary); }
.loader-dot:nth-child(2) { animation-delay: -0.16s; background-color: var(--accent-secondary); }
.loader-dot:nth-child(3) { background-color: var(--accent-tertiary); }

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }
  40% { transform: scale(1); opacity: 1; }
}

/* =========================
   OPAL RING — animated glow
   ========================= */

.opal-ring {
  overflow: visible;
}

/* Сам прогресс-круг */
.opal-ring-fg {
  filter:
    drop-shadow(0 0 10px rgba(124,124,255,0.35))
    drop-shadow(0 0 22px rgba(167,139,250,0.22))
    drop-shadow(0 0 36px rgba(96,165,250,0.18));
}

/* В светлой теме делаем свечение мягче */
html[data-theme="light"] .opal-ring-fg {
  filter:
    drop-shadow(0 0 8px rgba(107,124,255,0.22))
    drop-shadow(0 0 16px rgba(179,139,255,0.14))
    drop-shadow(0 0 26px rgba(96,165,250,0.10));
}

/* Анимация "движения" градиента: мы будем вращать градиент */
@keyframes opalGradSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* Этот класс навесим на <linearGradient> через CSS (см. HTML шаг ниже) */
.opal-grad-anim {
  transform-box: fill-box;
  transform-origin: 50% 50%;
  animation: opalGradSpin 10s linear infinite;
}

/* Чуть живее — медленное "дыхание" свечения */
@keyframes opalGlowPulse {
  0%, 100% { opacity: 0.92; }
  50%      { opacity: 1; }
}

.opal-ring-fg {
  animation: opalGlowPulse 4.5s ease-in-out infinite;
}
