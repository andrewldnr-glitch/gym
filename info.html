<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
    <script src="js/theme-preload.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Инструменты</title>

  <link rel="stylesheet" href="css/style.css">
  <!-- ✅ OPAL апгрейд именно для Tools -->
  <link rel="stylesheet" href="css/tools.css">

  <!-- ✅ Lucide CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
<!-- Monochrome premium layer -->
  <link rel="stylesheet" href="css/mono.tokens.css" />
  <link rel="stylesheet" href="css/mono.components.css" />
</head>

<body class="has-tab-bar mono">
  <div class="container">

    <h2 class="section-title">
      <span class="section-title__icon"><i data-lucide="sparkles"></i></span>
      Инструменты
    </h2>

    <!-- Переключатель разделов -->
    <div class="tools-tabs" role="tablist" aria-label="Tools tabs">
      <button class="tools-tab active" data-target="tdee" type="button" onclick="showCalc('tdee', this)">
        <span class="tools-tab__icon"><i data-lucide="flame"></i></span>
        Калории
      </button>
      <button class="tools-tab" data-target="bmi" type="button" onclick="showCalc('bmi', this)">
        <span class="tools-tab__icon"><i data-lucide="ruler"></i></span>
        ИМТ
      </button>
      <button class="tools-tab" data-target="info" type="button" onclick="showCalc('info', this)">
        <span class="tools-tab__icon"><i data-lucide="book-open"></i></span>
        Справка
      </button>
    </div>

    <!-- 1. Калькулятор Калорий -->
    <div id="section-tdee" class="section-group">
      <div class="info-card card tools-card">
        <h3 class="tools-card__title">
          <span class="tools-card__title-icon"><i data-lucide="utensils"></i></span>
          Калькулятор КБЖУ
        </h3>
        <p class="tools-card__desc">Рассчитайте суточную норму калорий и нутриентов для вашей цели.</p>

        <label class="field">
          <span class="field__label">Пол</span>
          <select id="calc-gender" class="calc-select">
            <option value="male">Мужчина</option>
            <option value="female">Женщина</option>
          </select>
        </label>

        <div class="calc-row">
          <label class="field">
            <span class="field__label">Возраст</span>
            <input type="number" id="calc-age" class="calc-input" placeholder="лет">
          </label>
          <label class="field">
            <span class="field__label">Рост</span>
            <input type="number" id="calc-height" class="calc-input" placeholder="см">
          </label>
        </div>

        <label class="field">
          <span class="field__label">Вес</span>
          <input type="number" id="calc-weight" class="calc-input" placeholder="кг">
        </label>

        <label class="field">
          <span class="field__label">Активность</span>
          <select id="calc-activity" class="calc-select">
            <option value="1.2">Малоподвижный образ жизни</option>
            <option value="1.375">Легкие тренировки (1-3 раза)</option>
            <option value="1.55" selected>Средняя активность (3-5 раз)</option>
            <option value="1.725">Высокая активность (6-7 раз)</option>
          </select>
        </label>

        <label class="field">
          <span class="field__label">Цель</span>
          <select id="calc-goal" class="calc-select">
            <option value="-500">Похудение (-500 ккал)</option>
            <option value="0" selected>Поддержание веса</option>
            <option value="300">Набор массы (+300 ккал)</option>
          </select>
        </label>

        <button class="calc-btn btn-state-primary" type="button" onclick="calculateTDEE()">
          <span class="btn-icon"><i data-lucide="calculator"></i></span>
          Рассчитать
        </button>

        <div id="calc-results" class="result-box">
          <div class="result-head">
            <div class="result-head__label">Ваша суточная норма</div>
            <div class="result-head__value">
              <span id="res-calories">0</span>
              <span class="result-head__unit">ккал</span>
            </div>
          </div>

          <div class="result-grid">
            <div class="result-item">
              <div class="result-item-value" id="res-protein">0г</div>
              <div class="result-item-label">Белки</div>
            </div>
            <div class="result-item">
              <div class="result-item-value" id="res-fats">0г</div>
              <div class="result-item-label">Жиры</div>
            </div>
            <div class="result-item">
              <div class="result-item-value" id="res-carbs">0г</div>
              <div class="result-item-label">Углеводы</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. Калькулятор ИМТ -->
    <div id="section-bmi" class="section-group" style="display:none;">
      <div class="info-card card tools-card">
        <h3 class="tools-card__title">
          <span class="tools-card__title-icon"><i data-lucide="activity"></i></span>
          Индекс массы тела (ИМТ)
        </h3>
        <p class="tools-card__desc">Быстрая оценка соответствия веса и роста.</p>

        <label class="field">
          <span class="field__label">Вес</span>
          <input type="number" id="bmi-weight" class="calc-input" placeholder="кг">
        </label>
        <label class="field">
          <span class="field__label">Рост</span>
          <input type="number" id="bmi-height" class="calc-input" placeholder="см">
        </label>

        <button class="calc-btn btn-state-primary" type="button" onclick="calculateBMI()">
          <span class="btn-icon"><i data-lucide="calculator"></i></span>
          Рассчитать
        </button>

        <div id="bmi-result" class="result-box">
          <div class="result-head">
            <div class="result-head__label">Ваш ИМТ</div>
            <div class="result-head__value">
              <span id="bmi-value">0</span>
              <span class="result-head__unit"></span>
            </div>
          </div>
          <div id="bmi-category" class="bmi-category">Категория</div>
        </div>
      </div>
    </div>

    <!-- 3. Справка -->
    <div id="section-info" class="section-group" style="display:none;">
      <div class="info-card card tools-card">
        <h3 class="tools-card__title">
          <span class="tools-card__title-icon"><i data-lucide="graduation-cap"></i></span>
          Как выбрать уровень?
        </h3>

        <ul class="info-list">
          <li><span class="accent-text accent--secondary">Новичок:</span> Базовые движения, акцент на технику.</li>
          <li><span class="accent-text accent--tertiary">Средний:</span> Сплит-тренировки и увеличение весов.</li>
          <li><span class="accent-text accent--primary">Продвинутый:</span> Работа на силу, большие веса.</li>
        </ul>
      </div>

      <div class="info-card card tools-card">
        <h3 class="tools-card__title">
          <span class="tools-card__title-icon"><i data-lucide="droplets"></i></span>
          Советы
        </h3>
        <p class="tools-card__desc">Не забывайте про воду и сон. Мышцы растут не на тренировке, а во время отдыха.</p>
      </div>
    </div>

  </div>

  <!-- Навигация -->

<script src="js/app.js"></script>
  <script src="js/tools.js"></script>
  <script src="js/theme.js"></script>


  <script>
    // ✅ отрисовать lucide-иконки
    document.addEventListener('DOMContentLoaded', () => {
      try { if (window.lucide) lucide.createIcons(); } catch (_) {}
    });

    initApp();

    function showCalc(id, btnEl) {
      // Скрываем все
      document.getElementById('section-tdee').style.display = 'none';
      document.getElementById('section-bmi').style.display = 'none';
      document.getElementById('section-info').style.display = 'none';

      // Убираем активный класс со всех кнопок
      document.querySelectorAll('.tools-tab').forEach(b => b.classList.remove('active'));

      // Показываем нужный и красим кнопку
      document.getElementById('section-' + id).style.display = 'block';
      if (btnEl) btnEl.classList.add('active');

      // лёгкая тактильность в TG
      try {
        window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('light');
      } catch (_) {}
    }
  </script>

  <script src="js/ui/modal.js"></script>
  <script src="js/ui/bottom-nav.js"></script>
  <script src="js/ui/toast.js"></script>
</body>
</html>
